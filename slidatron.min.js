;(function(t,e){if(typeof define==="function"&&define.amd)define(["jquery"],e);else if(typeof exports==="object")module.exports=e(require("jquery"));else t.returnExports=e(t.jQuery)})(this,function($,t){"use strict";var e="0.5.0";var i="slidatron";var n={animationEngine:null,easing:null,slideSelector:null,classNameSpace:"slidatron",holdTime:1e4,transitionTime:1e3,translateY:false,cursor:"move",drag:true,transition:"left",transitionModifier:null,onAfterInit:null,onAfterMove:null,onBeforeInit:null,onBeforeMove:null,autoSlide:true,adaptiveHeight:false,onBeforeAdaptHeight:null,onAfterAdaptHeight:null,allowDefault:false};function s(t,e){this.element=t;this.options=$.extend({},n,e);this._defaults=n;this._name=i;if($("."+this.options.classNameSpace+"-container").length){var s=2;while($("."+this.options.classNameSpace+"-"+s+"-container").length){s++}this.options.classNameSpace+="-"+s}this.init()}s.prototype={slides:[],styleCache:{},mapping:{},curIndex:0,position:0,slideWrapper:null,container:null,timeoutHandle:null,tweenHandle:{},moving:false,accelerated:false,$original:null,originalHTML:null,dragFrom:null,dragTo:null,init:function(){this.$original=$(this.element).clone();this.originalHTML=$(this.element)[0].outerHTML;var e=this.options;var i=this;this.accelerated=this.isAccelerated();if(typeof e.onBeforeInit=="function")e.onBeforeInit($(this.element),this);var n=$(this.element).addClass(e.classNameSpace+"-container").addClass("st-container");var s=e.slideSelector?n.find(e.slideSelector):n.children();var r=n.width();var a=e.adaptiveHeight?this.maxH(s,true):n.height();this.setCachedStyle(n);var o=$('<div class="'+e.classNameSpace+'-slide-wrapper st-slide-wrapper"></div>').css({position:"absolute",top:0,left:0});var l=$('<div class="'+e.classNameSpace+'-ctrl-wrapper st-ctrl-wrapper"></div>');var c=$('<a class="'+e.classNameSpace+'-next st-next">&gt;</a>').on("tap, click",function(t){t.preventDefault();if(!i.moving){var e=i.curIndex+1>i.slides.length-1?0:i.curIndex+1;i.stopShow();i.move(e);i.startShow()}});var d=$('<a class="'+e.classNameSpace+'-prev st-prev">&lt;</a>').on("tap, click",function(t){t.preventDefault();if(!i.moving){var e=i.curIndex-1<0?i.slides.length-1:i.curIndex-1;i.stopShow();i.move(e);i.startShow()}});var u=this.maxH(s);var f=0;s.each(function(){var t=$(this);i.setCachedStyle(t);var e=i.generateIndentifiers(f);var n=e.className;var s=e.id;var r=e.ctrlId;t.addClass(n+" "+s);o.append(t);var a=$('<a class="st-ctrl-elem" href="#'+s+'" id="'+r+'"></a>');a.on("tap, click",function(t){t.preventDefault();if(!i.moving){var e=$(this).attr("id").split("-");var n=parseInt(e[e.length-1]);i.stopShow();i.move(n);i.startShow()}});l.append(a);i.mapping.id={ctrl:a,slide:t};f++});if(e.adaptiveHeight)s.css("height",u);this.slides=s;n.css({width:r,height:a,position:"relative",overflow:"hidden"});n.append(o).parent().append(d).append(c).append(l);this.slideWrapper=o;this.container=n;this.trans().init();this.position=this.trans().cur();var h=false,p,m,v=function(e){i.position=i.trans().cur();var n=t,s=i.trans().dragFromElem()||[null],r=i.trans().curElem()||[null];if(e==t)e=i.trans().calcDragEndIndex();if(s[0]!=r[0])n=i.slides.index(s);i.move(e,n,t,function(){i.startShow()})};if(e.drag===true||e.drag=="touch"&&this.hasTouch()){o.find("a").on("click",function(t){if(h)t.preventDefault()});o.on("mousedown touchstart",function(t){h=false;if(e.translateY){p=i.findScrollingParent(o);m=p.scrollTop()}i.stopShow();i.stopAnimation();i.position=i.trans().cur()}).on("mouseup touchend",function(t){v()}).drag(function(t,n){if(e.translateY)p.scrollTop(m-n.deltaY);i.trans().dragHandler(n.deltaX)},{allowDefault:i.options.allowDefault}).drag("end",function(t,i){h=Math.abs(i.deltaX)>5;if(e.translateY&&!h)h=Math.abs(i.deltaY)>5;v()},{allowDefault:i.options.allowDefault}).css({cursor:this.options.cursor})}$(window).on("resize.slidatron",function(){i.stopAnimation();n.css({width:""});var t=n.parent().width();if(e.adaptiveHeight){if(typeof e.onBeforeAdaptHeight=="function")e.onBeforeAdaptHeight($(i.element),i);s.css({height:"",width:""});o.css({width:"",height:""});i.trans().resizeHandler();var r=i.maxH(s,true);o.css({height:r});n.css({height:o.outerHeight(true)});if(typeof e.onAfterAdaptHeight=="function")e.onAfterAdaptHeight($(i.element),i)}else{i.trans().resizeHandler()}i.trans().resizeSlideHandler();v(i.curIndex)});this.startShow();if(typeof e.onAfterInit=="function")e.onAfterInit($(this.element),this)},hasTouch:function(){try{document.createEvent("TouchEvent");return true}catch(t){return false}},findScrollingParent:function(t){var e=t;while(e&&e.css("overflow-y")!="scroll"&&e.css("overflow-y")!="auto"&&!e.is("body")){e=e.parent()}return e.is("body")?$("html, body"):e},slideW:function(t,e){var i=e.outerWidth(true)-e.width();return t-i},slideH:function(t,e){var i=e.outerHeight(true)-e.height();return t-i},uid:function(t){var e=t.attr("id");if(!e){while(!e||$("#"+e).length){e=Math.floor(Math.random()*1e4)+1}t.attr("id",e)}return e},getCachedStyle:function(t){var e=this.uid(t);return this.styleCache[e]},setCachedStyle:function(t){var e=this.uid(t);this.styleCache[e]=t.attr("style");return this},reApplyCachedStyle:function(t){t.attr("style",this.getCachedStyle(t));return this},maxH:function(e,i){var n=0,s=0;e.each(function(){var e=$(this);if(i!=t&&i)s=e.outerHeight(true);else s=e.height();if(n<s)n=s});return n},easing:function(){var t=this.options.easing;if(this.options.animationEngine=="gsap"){if(typeof t=="object")return t;return Quad.easeOut}else{if(this.accelerated){var e=["ease","linear","ease-in","ease-out","ease-in-out","step-start","step-end"];if(e.indexOf(t)!=-1)return t;if(/cubic\-bezier\([0-9\., ]+\)/.test(t))return t;if(/steps\(.+\)/.test(t))return t;return"ease"}else{if(t in jQuery.easing)return t;return"swing"}}},trans:function(){var e=this,i={left:{init:function(){var t=0,i=e.container.width();e.slides.each(function(){var n=$(this);n.css(e.trans().css(t*i,{position:"absolute",top:0,width:e.slideW(i,n)}));t++});e.slideWrapper.width(e.slides.length*i)},resizeHandler:function(){var t=e.container.parent().width();e.container.css({width:t});e.slides.each(function(){$(this).css({width:e.slideW(t,$(this))})});e.slideWrapper.css({width:e.slides.length*t})},resizeSlideHandler:function(){var t=0,i=e.container.parent().width();e.slides.each(function(){$(this).css(e.trans().css(t*i,{width:i}));t++})},dragHandler:function(t){var i=false,n={x1:-(e.slideWrapper.width()-e.container.width()),x2:0},s=parseFloat(e.position)+parseFloat(t);if(s<n.x1||s>n.x2)i=true;if(!i)e.slideWrapper.css(e.trans().css(s))},calcDragEndIndex:function(){var t=e.trans().cur(),i=e.container.width(),n=Math.abs(t%i),s=Math.abs(i/2),r=e.slides.length-1;var a=n>s?true:false;var o=Math.abs(a?Math.floor(t/i):Math.ceil(t/i));if(o>r)o=r;return o},getStateForNext:function(t){var i=-(t*e.container.width());var n=i>e.slides.length-1?0:i;return n},getStateForPrev:function(t){return false},transitionProp:function(){return e.accelerated?"transform":"left"},dragFromElem:function(){return e.slideWrapper},dragToElem:function(){return e.slideWrapper},getElemAt:function(t){return e.slideWrapper},nextElem:function(){return e.slideWrapper},curElem:function(){return e.slideWrapper},prevElem:function(){return e.slideWrapper},isSame:function(t,i){var n;if(e.accelerated){n=t["transform"].match(/(-?[0-9\.]+)/g);if(n&&typeof n=="object")n=n[4]}else{n=t["left"]}return n==e.trans().cur(i)},css:function(i,n){if(n==t)n={};e.accelerated?n["transform"]="matrix(1, 0, 0, 1, "+i+", 0)":n["left"]=i;return n},cur:function(i){var n;if(i==t)i=e.slideWrapper;if(!i.length)return 0;if(e.accelerated){n=i.css("transform").match(/(-?[0-9\.]+)/g);if(n&&typeof n=="object")n=n[4]}else{n=i.position().left}if(n=="none"||!n)n=0;return parseFloat(n)}},opacity:{init:function(){var t=0,i=e.container.width();e.slides.each(function(){var n=$(this);n.css(e.trans().css(t==0?1:0,{position:"absolute",top:0,left:0,width:e.slideW(i,n)}));t++});e.slideWrapper.width(i)},resizeHandler:function(){var t=e.container.parent().width();e.container.css({width:t});e.slides.each(function(){$(this).css({width:e.slideW(t,$(this))})})},resizeSlideHandler:function(){},dragHandler:function(t){var i=e.trans().curElem(),n=e.trans().prevElem(),s=e.trans().nextElem(),r=e.container.width(),t=parseFloat(t)/parseFloat(r),a=Math.abs(t+(1-e.position)),a=a>1?1:a,a=a<0?0:a;if(t<0){s.css(e.trans().css(a));i.css(e.trans().css(1-a));if(n[0]!=s[0])n.css(e.trans().css(0));e.dragFrom=a<.5?s:i;e.dragTo=a<.5?i:s}else{n.css(e.trans().css(a));i.css(e.trans().css(1-a));if(n[0]!=s[0])s.css(e.trans().css(0));e.dragFrom=a<.5?n:i;e.dragTo=a<.5?i:n}},calcDragEndIndex:function(){var i=e.trans().curElem(),n=e.trans().cur(i),s=e.trans().prevElem(),r=e.trans().cur(s),a=e.trans().nextElem(),o=e.trans().cur(a),l=t;if(n>r&&n>o)l=e.slides.index(i);if(r>n&&r>=o)l=e.slides.index(s);if(o>n&&o>=r)l=e.slides.index(a);if(l===t)l=e.slides.index(i);return l},isSame:function(t,i){var n=t["opacity"];return n==e.trans().cur(i)},getStateForNext:function(t){return 1},getStateForPrev:function(t){return 0},transitionProp:function(){return"opacity"},getElemAt:function(t){return $(e.slides[t])},dragFromElem:function(){return e.dragFrom},dragToElem:function(){return e.dragTo},nextElem:function(){var t=e.trans().curElem().next();if(!t.length)t=e.slides.first();return t},curElem:function(t){var i=e.slides.filter(".current");if(!i.length)i=e.slides.first();return i},prevElem:function(t){var i=e.trans().curElem().prev();if(!i.length)i=e.slides.last();return i},css:function(e,i){if(i==t)i={};i["opacity"]=e;i["z-index"]=e;return i},cur:function(i){var n;if(i==t)i=e.trans().curElem();n=i.css("opacity");if(n=="none"||!n)n=0;return parseFloat(n)}}};return i[this.options.transition]},supports:function(t){var e=document.body||document.documentElement,i=e.style;if(typeof i[t]=="string"){return true}var n=["Moz","webkit","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var s=0;s<n.length;s++){if(typeof i[n[s]+t]=="string"){return true}}return false},isAccelerated:function(){return this.supports("transform")&&this.supports("transition")&&String(this.options.transitionModifier).toLowerCase()!="no_transform"},generateIndentifiers:function(t){var e=this.options.classNameSpace+"-slide";var i=e+"-"+t;var n="ctrl-"+i;return{className:e,id:i,ctrlId:n}},startShow:function(){if(this.options.autoSlide){var t=this;this.stopShow();this.timeoutHandle=setInterval(function(){t.timeoutCallback()},this.options.holdTime)}if(!$("."+this.options.classNameSpace+"-ctrl-wrapper a.current").length){var e=this.generateIndentifiers(0);$("."+this.options.classNameSpace+"-ctrl-wrapper a").removeClass("current");$("#"+e.ctrlId).addClass("current")}},stopShow:function(){clearTimeout(this.timeoutHandle)},stopAnimation:function(e){var i=e!=t?{id:e}:this.tweenHandle;for(var n in i){var s=this.tweenHandle[n];if(s){if(this.options.animationEngine=="gsap"){if(s!=t)s.kill()}else{if(this.accelerated){s.off("transitionend.move webkitTransitionEnd.move oTransitionEnd.move otransitionend.move MSTransitionEnd.move").css(this.trans().css(this.trans().cur(s),{transition:this.trans().transitionProp()+" 0s"}))}else{s.stop()}}}}},timeoutCallback:function(){var t=this.curIndex+1>this.slides.length-1?0:this.curIndex+1;this.move(t)},move:function(e,i,n,s){if(i==t)i=this.curIndex;var r=this,a=i==t?this.trans().curElem():this.trans().getElemAt(i),o=this.trans().getElemAt(e),l=this.container,c=this.trans().getStateForNext(e),d=this.trans().getStateForPrev(e),u=this.options.classNameSpace,f=function(){r.moving=false;r.position=r.trans().cur();r.curIndex=e;r.slides.removeClass(u+"-transitioning-to").removeClass(u+"-transitioning-from");$("."+u+"-ctrl-wrapper a").removeClass(u+"-transitioning-to").removeClass(u+"-transitioning-from");var t=r.generateIndentifiers(e);$("."+u+"-ctrl-wrapper a").removeClass("current");$("#"+t.ctrlId).addClass("current");$("."+u+"-slide").removeClass("current");$("."+u+"-slide-"+e).addClass("current");if(typeof r.options.onAfterMove=="function")r.options.onAfterMove($(r.element),r);if(typeof s=="function")s()};if(typeof this.options.onBeforeMove=="function")this.options.onBeforeMove($(this.element),this);if(n==t)n=this.options.transitionTime;var h=this.trans().css(c);if(c!==false){this.doAnimation(o,this.trans().css(c),"next",n,f)}if(d!==false&&o[0]!=a[0]){this.doAnimation(a,this.trans().css(d),"prev",n,f)}if(i!=e){var p=$(this.slides[e]);if(p.length)p.addClass(u+"-transitioning-to");var m=r.generateIndentifiers(e);$("#"+m.ctrlId).addClass(u+"-transitioning-to");var v=$(this.slides[i]);if(v.length)v.addClass(u+"-transitioning-from");var g=r.generateIndentifiers(i);$("#"+g.ctrlId).addClass(u+"-transitioning-from")}},doAnimation:function(t,e,i,n,s){this.stopAnimation(i);if(this.options.animationEngine=="gsap"){this.tweenHandle[i]=TweenLite.fromTo(t[0],n/1e3,{css:this.trans().css(this.trans().cur())},{css:e,ease:this.easing(),onComplete:s})}else{if(this.accelerated){t.one("transitionend.move webkitTransitionEnd.move oTransitionEnd.move otransitionend.move MSTransitionEnd.move",s).css({transition:this.trans().transitionProp()+" "+n/1e3+"s "+this.easing()}).css(e)}else{t.animate(e,n,this.easing(),s)}this.tweenHandle[i]=t}this.moving=true;if(this.accelerated&&this.options.animationEngine!="gsap"&&this.trans().isSame(e,t)){this.moving=false;s()}},destroy:function(){var t=$(this.originalHTML);this.stopShow();this.stopAnimation();this.slideWrapper.after(t);this.slideWrapper.remove();$(window).off("resize.slidatron");$("."+this.options.classNameSpace+"-container").remove();$("."+this.options.classNameSpace+"-ctrl-wrapper").remove();$("."+this.options.classNameSpace+"-next").remove();$("."+this.options.classNameSpace+"-prev").remove();return t}};$.fn[i]=function(e){var n=this;return this.each(function(r){if(!$.data(this,"plugin_"+i)){$.data(this,"plugin_"+i,new s(this,e));if(e=="destroy"){var a=$.data(this,"plugin_"+i);var o=a.destroy();if(o!=t)n[r]=o[0];if(a)a=null;$.data(this,"plugin_"+i,null)}}})}});

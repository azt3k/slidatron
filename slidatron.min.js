;(function(t,e){if(typeof define==="function"&&define.amd)define(["jquery"],e);else if(typeof exports==="object")module.exports=e(require("jquery"));else t.returnExports=e(t.jQuery)})(this,function($,t){"use strict";var e="0.3.4";var i="slidatron";var s={animationEngine:null,easing:null,slideSelector:null,classNameSpace:"slidatron",holdTime:9e3,transitionTime:1500,translateY:false,drag:true,onAfterInit:null,onAfterMove:null,onBeforeInit:null,onBeforeMove:null,autoSlide:true,adaptiveHeight:false,onBeforeAdaptHeight:null,onAfterAdaptHeight:null};function n(t,e){this.element=t;this.options=$.extend({},s,e);this._defaults=s;this._name=i;if($("."+this.options.classNameSpace+"-container").length){var n=2;while($("."+this.options.classNameSpace+"-"+n+"-container").length){n++}this.options.classNameSpace+="-"+n}this.init()}n.prototype={slides:[],styleCache:{},mapping:{},curIndex:0,position:0,slideWrapper:null,container:null,timeoutHandle:null,tweenHandle:null,moving:false,accelerated:false,$original:null,originalHTML:null,init:function(){this.$original=$(this.element).clone();this.originalHTML=$(this.element)[0].outerHTML;var e=this.options;var i=this;this.accelerated=this.isAccelerated();if(typeof e.onBeforeInit=="function")e.onBeforeInit($(this.element),this);var s=$(this.element).addClass(e.classNameSpace+"-container").addClass("st-container");var n=e.slideSelector?s.find(e.slideSelector):s.children();var a=s.width();var r=e.adaptiveHeight?this.maxH(n,true):s.height();this.setCachedStyle(s);var o=$('<div class="'+e.classNameSpace+'-slide-wrapper st-slide-wrapper"></div>').css({position:"absolute",top:0,left:0,width:n.length*a});var l=$('<div class="'+e.classNameSpace+'-ctrl-wrapper st-ctrl-wrapper"></div>');var c=$('<a class="'+e.classNameSpace+'-next st-next">&gt;</a>').on("tap, click",function(t){t.preventDefault();if(!i.moving){var e=i.curIndex+1>i.slides.length-1?0:i.curIndex+1;i.stopShow();i.move(e);i.startShow()}});var h=$('<a class="'+e.classNameSpace+'-prev st-prev">&lt;</a>').on("tap, click",function(t){t.preventDefault();if(!i.moving){var e=i.curIndex-1<0?i.slides.length-1:i.curIndex-1;i.stopShow();i.move(e);i.startShow()}});var f=this.maxH(n);var u=0;n.each(function(){var t=$(this);i.setCachedStyle(t);var e=i.generateIndentifiers(u);var s=e.className;var n=e.id;var r=e.ctrlId;t.addClass(s+" "+n);o.append(t);var c=$('<a class="st-ctrl-elem" href="#'+n+'" id="'+r+'"></a>');c.on("tap, click",function(t){t.preventDefault();if(!i.moving){var e=$(this).attr("id").split("-");var s=parseInt(e[e.length-1]);i.stopShow();i.move(s);i.startShow()}});l.append(c);i.mapping.id={ctrl:c,slide:t};t.css(i.cssLeft(u*a,{position:"absolute",top:0,width:i.slideW(a,t)}));u++});if(e.adaptiveHeight)n.css("height",f);this.slides=n;s.css({width:a,height:r,position:"relative",overflow:"hidden"});s.append(o).parent().append(h).append(c).append(l);this.slideWrapper=o;this.container=s;this.position=this.curLeft();var d=false,p,v,m=function(e){i.position=i.curLeft();var s=i.curLeft(),r=Math.abs(s%a),o=Math.abs(a/2),l=n.length-1;var c=r>o?true:false;if(e==t)e=Math.abs(c?Math.floor(s/a):Math.ceil(s/a));if(e>l)e=l;i.move(e,t,function(){i.startShow()})};if(e.drag){o.find("a").on("click",function(t){if(d)t.preventDefault()});o.on("mousedown touchstart",function(t){d=false;if(e.translateY){p=i.findScrollingParent(o);v=p.scrollTop()}i.stopShow();i.stopAnimation();i.position=i.curLeft()}).drag(function(t,s){var n=false;var r=false;var l={x1:-(o.width()-a),x2:0};var c=parseFloat(i.position)+parseFloat(s.deltaX);if(e.translateY)p.scrollTop(v-s.deltaY);if(c<l.x1||c>l.x2)n=true;if(!n)o.css(i.cssLeft(c))}).drag("end",function(t,i){d=Math.abs(i.deltaX)>5;if(e.translateY&&!d)d=Math.abs(i.deltaY)>5;m()}).css({cursor:"move"})}$(window).resize(function(){i.stopAnimation();s.css({width:""});var t=s.parent().width();if(e.adaptiveHeight){if(typeof e.onBeforeAdaptHeight=="function")e.onBeforeAdaptHeight($(i.element),i);n.css({height:"",width:""});o.css({width:"",height:""});s.css({width:t});n.each(function(){$(this).css({width:i.slideW(t,$(this))})});o.css({width:n.length*t});var a=i.maxH(n,true);o.css({height:a});s.css({height:o.outerHeight(true)});if(typeof e.onAfterAdaptHeight=="function")e.onAfterAdaptHeight($(i.element),i)}else{s.css({width:t});n.each(function(){$(this).css({width:i.slideW(t,$(this))})});o.css({width:n.length*t})}var r=0;n.each(function(){$(this).css(i.cssLeft(r*t,{width:t}));r++});m(i.curIndex)});this.startShow();if(typeof e.onAfterInit=="function")e.onAfterInit($(this.element),this)},hasTouch:function(){try{document.createEvent("TouchEvent");return true}catch(t){return false}},findScrollingParent:function(t){var e=t;while(e&&e.css("overflow-y")!="scroll"&&e.css("overflow-y")!="auto"&&!e.is("body")){e=e.parent()}return e},slideW:function(t,e){var i=e.outerWidth(true)-e.width();return t-i},slideH:function(t,e){var i=e.outerHeight(true)-e.height();return t-i},uid:function(t){var e=t.attr("id");if(!e){while(!e||$("#"+e).length){e=Math.floor(Math.random()*1e4)+1}t.attr("id",e)}return e},getCachedStyle:function(t){var e=this.uid(t);return this.styleCache[e]},setCachedStyle:function(t){var e=this.uid(t);this.styleCache[e]=t.attr("style");return this},reApplyCachedStyle:function(t){t.attr("style",this.getCachedStyle(t));return this},maxH:function(e,i){var s=0,n=0;e.each(function(){var e=$(this);if(i!=t&&i)n=e.outerHeight(true);else n=e.height();if(s<n)s=n});return s},easing:function(){var t=this.options.easing;if(this.options.animationEngine=="gsap"){if(typeof t=="object")return t;return Quad.easeOut}else{if(this.accelerated){var e=["ease","linear","ease-in","ease-out","ease-in-out","step-start","step-end"];if(e.indexOf(t)!=-1)return t;if(/cubic\-bezier\([0-9\., ]+\)/.test(t))return t;if(/steps\(.+\)/.test(t))return t;return"ease"}else{if(t in jQuery.easing)return t;return"swing"}}},isSameLeft:function(t,e){var i;if(this.accelerated){i=t["transform"].match(/(-?[0-9\.]+)/g);if(i&&typeof i=="object")i=i[4]}else{i=t["left"]}return i==this.curLeft(e)},cssLeft:function(e,i){if(i==t)i={};this.accelerated?i["transform"]="matrix(1, 0, 0, 1, "+e+", 0)":i["left"]=e;return i},curLeft:function(e){var i;if(e==t)e=this.slideWrapper;if(this.accelerated){i=e.css("transform").match(/(-?[0-9\.]+)/g);if(i&&typeof i=="object")i=i[4]}else{i=e.position().left}if(i=="none"||!i)i=0;return parseFloat(i)},supports:function(t){var e=document.body||document.documentElement,i=e.style;if(typeof i[t]=="string"){return true}var s=["Moz","webkit","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<s.length;n++){if(typeof i[s[n]+t]=="string"){return true}}return false},isAccelerated:function(){return this.supports("transform")&&this.supports("transition")},generateIndentifiers:function(t){var e=this.options.classNameSpace+"-slide";var i=e+"-"+t;var s="ctrl-"+i;return{className:e,id:i,ctrlId:s}},startShow:function(){if(this.options.autoSlide){var t=this;this.stopShow();this.timeoutHandle=setInterval(function(){t.timeoutCallback()},this.options.holdTime);if(!$("."+this.options.classNameSpace+"-ctrl-wrapper a.current").length){var e=this.generateIndentifiers(0);$("."+this.options.classNameSpace+"-ctrl-wrapper a").removeClass("current");$("#"+e.ctrlId).addClass("current")}}},stopShow:function(){clearTimeout(this.timeoutHandle)},stopAnimation:function(){if(this.options.animationEngine=="gsap"){if(this.tweenHandle)this.tweenHandle.kill()}else{if(this.accelerated){this.slideWrapper.off("transitionend.move webkitTransitionEnd.move oTransitionEnd.move otransitionend.move MSTransitionEnd.move").css(this.cssLeft(this.curLeft(),{transition:"transform 0s"}))}else{this.slideWrapper.stop()}}},timeoutCallback:function(){var t=this.curIndex+1>this.slides.length-1?0:this.curIndex+1;this.move(t)},move:function(e,i,s){var n=this;var a=this.slideWrapper;var r=this.container;var o=-(e*r.width());var l=o>this.slides.length-1?0:o;var c=function(){n.moving=false;n.position=n.curLeft();n.curIndex=e;var t=n.generateIndentifiers(e);$("."+n.options.classNameSpace+"-ctrl-wrapper a").removeClass("current");$("#"+t.ctrlId).addClass("current");$("."+n.options.classNameSpace+"-slide").removeClass("current");$("."+n.options.classNameSpace+"-slide-"+e).addClass("current");if(typeof n.options.onAfterMove=="function")n.options.onAfterMove($(n.element),n);if(typeof s=="function")s()};if(typeof this.options.onBeforeMove=="function")this.options.onBeforeMove($(this.element),this);if(i==t)i=this.options.transitionTime;var h=this.cssLeft(l);this.stopAnimation();if(this.options.animationEngine=="gsap"){this.tweenHandle=TweenLite.fromTo(a[0],i/1e3,{css:this.cssLeft(this.curLeft())},{css:h,ease:this.easing(),onComplete:c})}else{if(this.accelerated){a.one("transitionend.move webkitTransitionEnd.move oTransitionEnd.move otransitionend.move MSTransitionEnd.move",c).css({transition:"transform "+i/1e3+"s "+this.easing()}).css(h)}else{a.animate(h,i,this.easing(),c)}}this.moving=true;if(this.accelerated&&this.options.animationEngine!="gsap"&&this.isSameLeft(h,a)){this.moving=false}},destroy:function(){var t=$(this.originalHTML);this.slideWrapper.after(t);this.slideWrapper.remove();$("."+this.options.classNameSpace+"-container").remove();$("."+this.options.classNameSpace+"-ctrl-wrapper").remove();$("."+this.options.classNameSpace+"-next").remove();$("."+this.options.classNameSpace+"-prev").remove();return t}};$.fn[i]=function(e){var s=this;return this.each(function(a){if(!$.data(this,"plugin_"+i)){$.data(this,"plugin_"+i,new n(this,e))}else{if(e=="destroy"){var r=$.data(this,"plugin_"+i);var o=r.destroy();if(o!=t)s[a]=o[0];if(r)r=null;$.data(this,"plugin_"+i,null)}}})}});

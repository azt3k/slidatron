;(function($,e,t,i){"use strict";var s="0.2.4";var n="slidatron";var a={animationEngine:null,easing:null,slideSelector:null,classNameSpace:"slidatron",holdTime:9e3,transitionTime:1500,onAfterInit:null,onAfterMove:null,onBeforeInit:null,onBeforeMove:null,autoSlide:true};function r(e,t){this.element=e;this.options=$.extend({},a,t);this._defaults=a;this._name=n;if($("."+this.options.classNameSpace+"-container").length){var i=2;while($("."+this.options.classNameSpace+"-"+i+"-container").length){i++}this.options.classNameSpace+="-"+i}this.init()}r.prototype={slides:[],mapping:{},curIndex:0,position:0,slideWrapper:null,container:null,timeoutHandle:null,tweenHandle:null,moving:false,accelerated:false,$original:null,originalHTML:null,init:function(){this.$original=$(this.element).clone();this.originalHTML=$(this.element)[0].outerHTML;var t=this.options;var s=this;this.accelerated=this.isAccelerated();if(typeof t.onBeforeInit=="function")t.onBeforeInit();var n=$(this.element).addClass(t.classNameSpace+"-container").addClass("st-container");var a=t.slideSelector?n.find(t.slideSelector):n.children();var r=n.width();var o=n.height();var l=$('<div class="'+t.classNameSpace+'-slide-wrapper st-slide-wrapper"></div>').css({position:"absolute",top:0,left:0,width:a.length*r});var c=$('<div class="'+t.classNameSpace+'-ctrl-wrapper st-ctrl-wrapper"></div>');var p=$('<a class="'+t.classNameSpace+'-next st-next">&gt;</a>').on("click",function(e){e.preventDefault();if(!s.moving){var t=s.curIndex+1>s.slides.length-1?0:s.curIndex+1;s.stopShow();s.move(t);s.startShow()}});var f=$('<a class="'+t.classNameSpace+'-prev st-prev">&lt;</a>').on("click",function(e){e.preventDefault();if(!s.moving){var t=s.curIndex-1<0?s.slides.length-1:s.curIndex-1;s.stopShow();s.move(t);s.startShow()}});var h=0;a.each(function(){var e=$(this);var t=s.generateIndentifiers(h);var i=t.className;var n=t.id;var a=t.ctrlId;e.addClass(i+" "+n);l.append(e);var o=$('<a class="st-ctrl-elem" href="#'+n+'" id="'+a+'"></a>');o.on("click",function(e){e.preventDefault();if(!s.moving){var t=$(this).attr("id").split("-");var i=parseInt(t[t.length-1]);s.stopShow();s.move(i);s.startShow()}});c.append(o);s.mapping.id={ctrl:o,slide:e};e.css(s.cssLeft(h*r,{position:"absolute",top:0,width:r}));h++});this.slides=a;n.css({width:r,height:o,position:"relative",overflow:"hidden"});n.append(l).parent().append(f).append(p).append(c);this.slideWrapper=l;this.container=n;this.position=this.curLeft();var d=false;l.find("a").on("click",function(e){if(d)e.preventDefault()});l.on("mousedown touchstart",function(e){d=false;s.stopShow();s.stopAnimation();s.position=s.curLeft()}).drag(function(e,t){var i=false;var n=false;var a={x1:-(l.width()-r),x2:0};var o=parseFloat(s.position)+parseFloat(t.deltaX);if(o<a.x1||o>a.x2)i=true;if(!i)l.css(s.cssLeft(o))}).drag("end",function(e,t){d=Math.abs(t.deltaX)>5;s.position=s.curLeft();var n=s.curLeft();var a=Math.abs(n%r);var o=Math.abs(r/2);var l=a>o?true:false;var c=Math.abs(l?Math.floor(n/r):Math.ceil(n/r));s.move(c,i,function(){s.startShow()})}).css({cursor:"move"});$(e).resize(function(){var e=n.parent().width();n.css({width:e});a.css({width:e});l.css({width:a.length*e});var t=0;a.each(function(){$(this).css(s.cssLeft(t*e,{width:e}));t++})});s.startShow();if(typeof t.onAfterInit=="function")t.onAfterInit()},easing:function(){var e=this.options.easing;if(this.options.animationEngine=="gsap"){if(typeof e=="object")return e;return Quad.easeOut}else{if(this.accelerated){var t=["ease","linear","ease-in","ease-out","ease-in-out","step-start","step-end"];if(t.indexOf(e)!=-1)return e;if(/cubic\-bezier\([0-9\., ]+\)/.test(e))return e;if(/steps\(.+\)/.test(e))return e;return"ease"}else{if(e in jQuery.easing)return e;return"swing"}}},cssLeft:function(e,t){if(t==i)t={};this.accelerated?t["transform"]="matrix(1, 0, 0, 1, "+e+", 0)":t["left"]=e;return t},curLeft:function(e){var t;if(e==i)e=this.slideWrapper;if(this.accelerated){t=e.css("transform").match(/(-?[0-9\.]+)/g);if(t&&typeof t=="object")t=t[4]}else{t=e.position().left}if(t=="none"||!t)t=0;return parseFloat(t)},supports:function(e){var i=t.body||t.documentElement,s=i.style;if(typeof s[e]=="string"){return true}var n=["Moz","webkit","Webkit","Khtml","O","ms"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var a=0;a<n.length;a++){if(typeof s[n[a]+e]=="string"){return true}}return false},isAccelerated:function(){return this.supports("transform")&&this.supports("transition")},generateIndentifiers:function(e){var t=this.options.classNameSpace+"-slide";var i=t+"-"+e;var s="ctrl-"+i;return{className:t,id:i,ctrlId:s}},startShow:function(){if(this.options.autoSlide){var e=this;this.stopShow();this.timeoutHandle=setInterval(function(){e.timeoutCallback()},this.options.holdTime);if(!$("."+this.options.classNameSpace+"-ctrl-wrapper a.current").length){var t=this.generateIndentifiers(0);$("."+this.options.classNameSpace+"-ctrl-wrapper a").removeClass("current");$("#"+t.ctrlId).addClass("current")}}},stopShow:function(){clearTimeout(this.timeoutHandle)},stopAnimation:function(){if(this.options.animationEngine=="gsap"){if(this.tweenHandle)this.tweenHandle.kill()}else{if(this.accelerated){this.slideWrapper.off("transitionend.move webkitTransitionEnd.move oTransitionEnd.move otransitionend.move MSTransitionEnd.move").css(this.cssLeft(this.curLeft(),{transition:"transform 0s"}))}else{this.slideWrapper.stop()}}},timeoutCallback:function(){var e=this.curIndex+1>this.slides.length-1?0:this.curIndex+1;this.move(e)},move:function(e,t,s){var n=this;var a=this.slideWrapper;var r=this.container;var o=-(e*r.width());var l=o>this.slides.length-1?0:o;var c=function(){n.moving=false;n.position=n.curLeft();n.curIndex=e;var t=n.generateIndentifiers(e);$("."+n.options.classNameSpace+"-ctrl-wrapper a").removeClass("current");$("#"+t.ctrlId).addClass("current");$("."+n.options.classNameSpace+"-slide").removeClass("current");$("."+n.options.classNameSpace+"-slide-"+e).addClass("current");if(typeof n.options.onAfterMove=="function")n.options.onAfterMove();if(typeof s=="function")s()};if(typeof n.options.onBeforeMove=="function")n.options.onBeforeMove();if(t==i)t=this.options.transitionTime;var p=this.cssLeft(l);this.stopAnimation();if(this.options.animationEngine=="gsap"){this.tweenHandle=TweenLite.fromTo(a[0],t/1e3,{css:this.cssLeft(this.curLeft())},{css:p,ease:this.easing(),onComplete:c})}else{if(this.accelerated){a.one("transitionend.move webkitTransitionEnd.move oTransitionEnd.move otransitionend.move MSTransitionEnd.move",c).css({transition:"transform "+t/1e3+"s "+this.easing()}).css(p)}else{a.animate(p,t,this.easing(),c)}}this.moving=true},destroy:function(){var e=$(this.originalHTML);this.slideWrapper.after(e);this.slideWrapper.remove();$("."+this.options.classNameSpace+"-container").remove();$("."+this.options.classNameSpace+"-ctrl-wrapper").remove();$("."+this.options.classNameSpace+"-next").remove();$("."+this.options.classNameSpace+"-prev").remove();return e}};$.fn[n]=function(e){var t=this;return this.each(function(s){if(!$.data(this,"plugin_"+n)){$.data(this,"plugin_"+n,new r(this,e))}else{if(e=="destroy"){var a=$.data(this,"plugin_"+n);var o=a.destroy();if(o!=i)t[s]=o[0];if(a)a=null;$.data(this,"plugin_"+n,null)}}})}})(jQuery,window,document);
